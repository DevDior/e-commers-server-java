# 문제 정의
### e-커머스 서비스 구현

# 기능적 요구사항
- [ ] 잔액 충전 / 조회 API
  - 사용자 식별자 및 충전할 금액을 받아 잔액을 충전한다.
  - 사용자 식별자를 통해 사용자의 잔액을 조회한다.
<br><br>
- [ ] 상품 조회 API
  - 상품 주문에 필요한 메뉴 정보들을 구성해야 한다.
  - 상품 정보(ID, 이름, 가격, 잔여수량)을 조회해야 한다.
  - 조회시점의 상품별 잔여수량이 정확해야 한다.
<br><br>
- [ ] 주문 / 결제 API
  - 사용자 식별자와 상품 정보(ID, 수량) 목록을 입력받아 주문하고 결제해야 한다.
  - 사용자는 상품을 여러개 선택해 주문할 수 있다.
  - 결제는 기 충전된 잔액을 기반으로 수행하며 성공할 시 잔액을 차감해야 한다.
  - 데이터 분석을 위해 결제 성공 시에 실시간으로 주문 정보를 데이터 플랫폼에 전송해야 한다.(데이터 플랫폼은 어플리케이션 `외부`라고 가정)
  - 주문 시에 유효한 할인 쿠폰을 같이 전달하면, 전체 주문금액에 대해 할인 혜택을 받아야 한다.
<br><br>
- [ ] 선착순 쿠폰 발급 / 보유 쿠폰 조회 API
  - 사용자는 선착순으로 할인 쿠폰을 발급받는다.
<br><br>
- [ ] 인기 판매 상품 조회 API 
  - 최근 3일간 가장 많이 팔린 상위 5개 상품 정보를 제공해야 한다.

# 비기능적 요구사항
### 성능
- API 요청에 대해 평균 응답 시간 300ms 이하, 95% 요청에 대해 500ms 이하를 보장해야 한다.
- 잔액 충전, 결제 등 주요 트랜잭션성 API는 TPS 100 이상을 처리할 수 있어야 한다.
- 재고/쿠폰 관련 동시성 트랜잭션에 대해 락 또는 원자성 보장을 통해 정확한 수량 처리를 보장해야 한다.

### 확장성
- 수평 확장 가능한 구조 설계
- 비동기 메시지 처리 기반의 외부 전송 처리
- 데이터 증가에 따른 DB/캐시 분리 및 확장 고려(CQRS, 샤딩)

### 가용성
- 99.9% 이상의 가용성 목표
- 장애 복구(Failover)
- 주문/결제 실패 시 재시도 및 트랜잭션 롤백 매커니즘 구현
- 무중단 배포

### 보안
- JWT 기반 인증 및 HTTPS 통신
- 속도 제한 및 인증 기반의 쿠폰 발급 처리

### 유지보수성
- Layered Architecture(Controller-Service-Repository)
- 도메인 패키지 구조로 진행
- TDD 기반 단위 테스트 확보
- Swagger 기반의 API 문서 자동화 유지